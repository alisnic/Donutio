/* Donutio 2.3.0 by Michael Hohlovich */
!function(t){t.fn.donutio=function(a){var u=t.extend({multiple:!0,color:"#f00",backColor:"#eee",radius:200,width:10,padding:10,type:"donut",active:0},a),o=2*(u.radius+u.padding),s=u.data.length,l=n(u.data),c=r(u.data,l),f=(360-c.reduce(function(t,e){return t+e}))/s;if(u.multiple)for(i=0;s>i;i++)e(o,f,u,c,i,this,l);else e(o,f,u,c,u.active,this,l);return this};var e=function(e,n,i,r,s,c,f){var h=a(e),d=u("svg");d.setAttribute("width",e),d.setAttribute("height",e);var p=0,v=0;for(j=0;j<i.data.length;j++){p=v+n,v=p+r[j];var g=l(i,s),b=u("path");"donut"==i.type?(b.setAttribute("stroke-width",i.width),b.setAttribute("fill","none"),j==s?b.setAttribute("stroke",g.active):b.setAttribute("stroke",g.muted)):(b.setAttribute("stroke-width",0),j==s?b.setAttribute("fill",g.active):b.setAttribute("fill",g.muted)),b.setAttribute("d",o(i.type,Math.floor(e/2),Math.floor(e/2),i.radius,p,v)),d.appendChild(b)}if(h.append(d),i.percents){var w=(Math.round(Math.abs(i.data[s].value)/f*1e4)/100).toString()+"%",y=t("<span class='value-percent' />").html(w);h.append(y)}"text"in i.data[s]&&i.data[s].text.forEach(function(e,n){y=t("<span class='value-"+n+"' />").html(e),h.append(y)}),c.append(h)},n=function(t){var e=0;return t.forEach(function(t){e+=Math.abs(t.value)}),e},r=function(t,e){var n=[];return t.forEach(function(t){var i=Math.floor(Math.abs(t.value)/e*100),r=Math.ceil(3.6*i);n.push(r)}),n},a=function(e){return t("<div class='donut' />").css({width:e,height:e})},u=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return"svg"==t&&e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),e},o=function(t,e,n,i,r,a){var u=s(e,n,i,a),o=s(e,n,i,r),l=180>=a-r?"0":"1",c=[];return c="donut"==t?["M",u.x,u.y,"A",i,i,0,l,0,o.x,o.y].join(" "):["M",u.x,u.y,"A",i,i,0,l,0,o.x,o.y,"L",e,n,"L",u.x,u.y].join(" ")},s=function(t,e,n,i){var r=(i-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}},l=function(t,e){var n=t.data[e].value;return n>0?{active:t.color_positive,muted:c(.8,t.color_positive,"#fff")}:{active:t.color_negative,muted:c(.8,t.color_negative,"#fff")}},c=function(t,e,n){if("number"!=typeof t||-1>t||t>1||"string"!=typeof e||"r"!=e[0]&&"#"!=e[0]||"string"!=typeof n&&"undefined"!=typeof n)return null;this.sbcRip||(this.sbcRip=function(t){var e=t.length,n=new Object;if(e>9){if(t=t.split(","),t.length<3||t.length>4)return null;n[0]=i(t[0].slice(4)),n[1]=i(t[1]),n[2]=i(t[2]),n[3]=t[3]?parseFloat(t[3]):-1}else{switch(e){case 8:case 6:case 3:case 2:case 1:return null}6>e&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(e>4?t[4]+""+t[4]:"")),t=i(t.slice(1),16),n[0]=t>>16&255,n[1]=t>>8&255,n[2]=255&t,n[3]=9==e||5==e?r((t>>24&255)/255*1e4)/1e4:-1}return n});var i=parseInt,r=Math.round,a=e.length>9,a="string"==typeof n?n.length>9?!0:"c"==n?!a:!1:a,u=0>t,t=u?-1*t:t,n=n&&"c"!=n?n:u?"#000000":"#FFFFFF",o=sbcRip(e),s=sbcRip(n);return o&&s?a?"rgb("+r((s[0]-o[0])*t+o[0])+","+r((s[1]-o[1])*t+o[1])+","+r((s[2]-o[2])*t+o[2])+(o[3]<0&&s[3]<0?")":","+(o[3]>-1&&s[3]>-1?r(1e4*((s[3]-o[3])*t+o[3]))/1e4:s[3]<0?o[3]:s[3])+")"):"#"+(4294967296+16777216*(o[3]>-1&&s[3]>-1?r(255*((s[3]-o[3])*t+o[3])):s[3]>-1?r(255*s[3]):o[3]>-1?r(255*o[3]):255)+65536*r((s[0]-o[0])*t+o[0])+256*r((s[1]-o[1])*t+o[1])+r((s[2]-o[2])*t+o[2])).toString(16).slice(o[3]>-1||s[3]>-1?1:3):null}}(jQuery);
