/* Donutio 2.4.0 by Michael Hohlovich */
!function(t){var e=function(e){return this.each(function(){var n=t.extend({multiple:!0,color_negative:"#f00",color_positive:"#0f0",radius:200,width:10,padding:10,type:"donut",active:0,percents:!1,colored_percents:!1},e),r=2*(n.radius+n.padding),s=n.data.length,c=o(n.data),l=u(n.data,c),f=(360-l.reduce(function(t,e){return t+e}))/s;if(n.multiple)for(i=0;s>i;i++)a(r,f,n,l,i,t(this),c);else a(r,f,n,l,n.active,t(this),c)})},n=function(){return this.each(function(){var e=t(this).find(".donut");e.each(function(e,n){t(n).off()}),t(this).empty()})},r={init:e,destroy:n};t.fn.donutio=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.Donutio"):r.init.apply(this,arguments)};var a=function(e,n,i,r,a,o,u){var f=s(e),h=c("svg");h.setAttribute("width",e),h.setAttribute("height",e);var p=0,v=0;for(j=0;j<i.data.length;j++){p=v+n,v=p+r[j];var g=d(i,a),y=c("path");"donut"==i.type?(y.setAttribute("stroke-width",i.width),y.setAttribute("fill","none"),j==a?y.setAttribute("stroke",g.active):y.setAttribute("stroke",g.muted)):(y.setAttribute("stroke-width",0),j==a?y.setAttribute("fill",g.active):y.setAttribute("fill",g.muted)),y.setAttribute("d",l(i.type,Math.floor(e/2),Math.floor(e/2),i.radius,p,v)),h.appendChild(y)}if(f.append(h),i.percents){var b=(Math.round(Math.abs(i.data[a].value)/u*1e4)/100).toString()+"%",w=t("<span class='value-percent' />").html(b);i.colored_percents&&w.css("color",g.active),f.append(w)}if("text"in i.data[a]&&i.data[a].text.forEach(function(e,n){w=t("<span class='value-"+n+"' />").html(e),f.append(w)}),"url"in i.data[a]){var m=i.data[a].url,M=t("<a href='"+m+"' />").html(f);o.append(M)}else if(o.append(f),t.isFunction(i.onclick)){var x=i.onclick;f.on("click",function(t){t.preventDefault(),x(i.data[a].id)})}},o=function(t){var e=0;return t.forEach(function(t){e+=Math.abs(t.value)}),e},u=function(t,e){var n=[];return t.forEach(function(t){var i=Math.floor(Math.abs(t.value)/e*100),r=Math.ceil(3.6*i);n.push(r)}),n},s=function(e){return t("<div class='donut' />").css({width:e})},c=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return"svg"==t&&e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),e},l=function(t,e,n,i,r,a){var o=f(e,n,i,a),u=f(e,n,i,r),s=180>=a-r?"0":"1",c=[];return c="donut"==t?["M",o.x,o.y,"A",i,i,0,s,0,u.x,u.y].join(" "):["M",o.x,o.y,"A",i,i,0,s,0,u.x,u.y,"L",e,n,"L",o.x,o.y].join(" ")},f=function(t,e,n,i){var r=(i-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}},d=function(t,e){var n=t.data[e].value;return n>0?{active:t.color_positive,muted:h(.8,t.color_positive,"#fff")}:{active:t.color_negative,muted:h(.8,t.color_negative,"#fff")}},h=function(t,e,n){if("number"!=typeof t||-1>t||t>1||"string"!=typeof e||"r"!=e[0]&&"#"!=e[0]||"string"!=typeof n&&"undefined"!=typeof n)return null;this.sbcRip||(this.sbcRip=function(t){var e=t.length,n=new Object;if(e>9){if(t=t.split(","),t.length<3||t.length>4)return null;n[0]=i(t[0].slice(4)),n[1]=i(t[1]),n[2]=i(t[2]),n[3]=t[3]?parseFloat(t[3]):-1}else{switch(e){case 8:case 6:case 3:case 2:case 1:return null}6>e&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(e>4?t[4]+""+t[4]:"")),t=i(t.slice(1),16),n[0]=t>>16&255,n[1]=t>>8&255,n[2]=255&t,n[3]=9==e||5==e?r((t>>24&255)/255*1e4)/1e4:-1}return n});var i=parseInt,r=Math.round,a=e.length>9,a="string"==typeof n?n.length>9?!0:"c"==n?!a:!1:a,o=0>t,t=o?-1*t:t,n=n&&"c"!=n?n:o?"#000000":"#FFFFFF",u=sbcRip(e),s=sbcRip(n);return u&&s?a?"rgb("+r((s[0]-u[0])*t+u[0])+","+r((s[1]-u[1])*t+u[1])+","+r((s[2]-u[2])*t+u[2])+(u[3]<0&&s[3]<0?")":","+(u[3]>-1&&s[3]>-1?r(1e4*((s[3]-u[3])*t+u[3]))/1e4:s[3]<0?u[3]:s[3])+")"):"#"+(4294967296+16777216*(u[3]>-1&&s[3]>-1?r(255*((s[3]-u[3])*t+u[3])):s[3]>-1?r(255*s[3]):u[3]>-1?r(255*u[3]):255)+65536*r((s[0]-u[0])*t+u[0])+256*r((s[1]-u[1])*t+u[1])+r((s[2]-u[2])*t+u[2])).toString(16).slice(u[3]>-1||s[3]>-1?1:3):null}}(jQuery);
