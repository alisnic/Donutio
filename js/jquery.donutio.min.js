/* Donutio 2.0 by Michael Hohlovich */
!function(t){t.fn.donutio=function(r){var a=t.extend({multiple:!0,color:"#f00",backColor:"#eee",radius:200,width:10,padding:10,type:"donut"},r),o=2*(a.radius+a.padding),n=a.data.length,u=0;a.data.forEach(function(t){u+=Math.abs(t.value)});var s=[];a.data.forEach(function(t){var e=Math.floor(Math.abs(t.value)/u*100),r=Math.ceil(3.6*e);s.push(r)});var d=(360-s.reduce(function(t,e){return t+e}))/(n-1);for(i=0;n>i;i++){var h=t("<div class='donut' />").css({width:o,height:o});this.append(h);var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("width",o),l.setAttribute("height",o),l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");var c=0,w=0;for(j=0;n>j;j++){c=w+d,w=c+s[j];var f=document.createElementNS("http://www.w3.org/2000/svg","path");"donut"==a.type?(f.setAttribute("stroke-width",a.width),f.setAttribute("fill","none"),j==i?f.setAttribute("stroke",a.color):f.setAttribute("stroke",a.backColor)):(f.setAttribute("stroke-width",0),j==i?f.setAttribute("fill",a.color):f.setAttribute("fill",a.backColor)),f.setAttribute("d",e(a.type,Math.floor(o/2),Math.floor(o/2),a.radius,c,w)),l.appendChild(f)}h.append(l),a.data[i].text.forEach(function(e,r){var a=t("<span class='value-"+r+"' />").html(e);h.append(a)})}return this};var e=function(t,e,a,i,o,n){var u=r(e,a,i,n),s=r(e,a,i,o),d=180>=n-o?"0":"1",h=[];return h="donut"==t?["M",u.x,u.y,"A",i,i,0,d,0,s.x,s.y].join(" "):["M",u.x,u.y,"A",i,i,0,d,0,s.x,s.y,"L",e,a,"L",u.x,u.y].join(" ")},r=function(t,e,r,a){var i=(a-90)*Math.PI/180;return{x:t+r*Math.cos(i),y:e+r*Math.sin(i)}}}(jQuery);